<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz App</title>
  <!-- Include Firebase scripts without module syntax -->
  <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-database-compat.js"></script>
</head>
<body>

<div id="quiz-container">
  <h1>Quiz</h1>
  <div id="question"></div>
  <div>
    <label>Your Answer: <input type="text" id="user-answer"></label>
  </div>
  <button onclick="checkAnswer()">Submit Answer</button>
</div>

<script>
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCpVA5MZNF3CIfISIfJdrDGnFpYYFuiwZM",
  authDomain: "pre-cryptic-hunt.firebaseapp.com",
  databaseURL: "https://pre-cryptic-hunt-default-rtdb.firebaseio.com",
  projectId: "pre-cryptic-hunt",
  storageBucket: "pre-cryptic-hunt.appspot.com",
  messagingSenderId: "159924093216",
  appId: "1:159924093216:web:725dfc274f420512c75745",
  measurementId: "G-3KB6L92MQ8"
};

  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // Get reference to Questions and Answers
  const questionsRef = database.ref('/Questions');
  const answersRef = database.ref('/Answers');

  let currentQuestion = 1;

  // Fetch and display the first question
  questionsRef.child(`Q${currentQuestion}`).once('value').then(snapshot => {
    const question = snapshot.val();
    document.getElementById('question').innerHTML = `<p>${question}</p>`;
  });

  // Check user's answer against the correct answer
  function checkAnswer() {
    const userAnswer = document.getElementById('user-answer').value.toLowerCase();

    answersRef.child(`A${currentQuestion}`).once('value').then(snapshot => {
      const correctAnswer = snapshot.val().toLowerCase();

      if (userAnswer === correctAnswer) {
        alert('Correct!');
      } else {
        alert('Incorrect. Try again.');
      }
    });

    // Move to the next question
    currentQuestion++;

    if (currentQuestion <= 3) {
      questionsRef.child(`Q${currentQuestion}`).once('value').then(snapshot => {
        const question = snapshot.val();
        document.getElementById('question').innerHTML = `<p>${question}</p>`;
      });
    } else {
      alert('Quiz completed!');
    }
  }
</script>

</body>
</html>
